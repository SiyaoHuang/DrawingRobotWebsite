
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Drawing Robot with Single Camera</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- <script src="../../assets/js/ie-emulation-modes-warning.js"></script> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Drawing Robot</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#intro">Introduction</a></li>
            <li><a href="#obj">Project Objective</a></li>
            <li><a href="#design">Design and Testing</a></li>
            <li><a href="#drawings">Drawings</a></li>
            <li><a href="#testing">Testing</a></li>
            <li><a href="#result">Conclusions</a></li>
            <li><a href="#future">Future Work</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div class="starter-template">
        <h1>Drawing Robot</h1>
        <p class="lead">ECE5725 Project<br>A Project By Siyao Huang(sh2435) Daniel Kim(dsk252).</p>
      </div>

      <hr>
      <div class="center-block">
          <iframe width="640" height="360" src="https://www.youtube.com/embed/eiHghX5anlE" frameborder="0" allowfullscreen></iframe>
          <h4 style="text-align:center;">Demonstration Video</h4>
      </div>

      <hr id="intro">

      <div style="text-align:center;">
              <h2>Introduction</h2>
              <p style="text-align: left;padding: 0px 30px;">Overall, we accomplished our objective: we implemented a small robot that could draw a picture based on input from a user interface. The robot itself has a three servos, two for the wheels and one for moving a pen up and down. The Pi camera tracks the movement of the robot by looking for three colored circles on top of the robot to determine its position and direction and the Raspberry Pi then uses this information to guide the robot from point to point. The camera can be placed (theoretically) in any orientation since we use perspective mapping to determine the 3D position of the robot. Additionally, the bot itself is standalone, requiring no external connections and has its own power supply as well as a Pi Zero. It wirelessly connects with the Raspberry Pi which communicates to the Pi Zero how the robot should move. With this system, the we are able to sketch user drawn shapes onto a paper. </p>
      </div>

    <hr id='obj'>

      <div class="row">
          <div class="col-md-4" style="text-align:center;">
          <img class="img-rounded" src="pics/drawing (11).jpg" alt="Generic placeholder image" width="240" height="240">
          <h4>Project group picture</h4>
          </div>
          <div class="col-md-8" style="font-size:18px;">
          <h2>Project Objective:</h2>
            <p style="text-align: left;padding: 0px 30px;">Our main objective for this project was to create a robot that could draw pictures accurately by using a camera to track its direction and position. We also wanted the robot to be fairly small so that it would fit comfortably on any size of paper as well as low cost and as simple as possible. Additionally, we wanted to provide users with some sort of interface which would display the current status of the robot as well as show a canvas of some sort on which the user could draw a picture which the robot would then draw on the paper. </p>
          <ul>
              <li>some important objectives.some important objectives.some important objectives.some important objectives.</li>
                <li>some other important objectives.</li>
            <li>some not-that-important objectives.</li>
          </ul>
          </div>
      </div>

    <hr id='design'>

      <div style="text-align:center;">
              <h2>Design</h2>
              <div style="text-align:center">
                <h3>overall</h3>
                <p style="text-align: left;padding: 0px 30px;">Our main objective for this project was to create a robot that could draw pictures accurately by using a camera to track its direction and position. We also wanted the robot to be fairly small so that it would fit comfortably on any size of paper as well as low cost and as simple as possible. Additionally, we wanted to provide users with some sort of interface which would display the current status of the robot as well as show a canvas of some sort on which the user could draw a picture which the robot would then draw on the paper. </p>

                <p style="text-align: left;padding: 0px 30px;">Our system works by first allowing the user to draw points on the PiTFT. When a point is drawn, it is automatically connected to the previous point with a line. After the user completes the drawing, the controller calibrates the perspective mapping software by having the robot move around in a predetermined fashion. Position of the robot is determined by a camera and three colored dots arranged in a triangle with a fixed distance of 1 inches between the centers of the dots. The drawn array of points is then sent to the controller which guides the robot from point to point, getting input from the perspective mapping software to determine the error in the bot’s trajectory and correct accordingly. The controller sends command packets to the Pi Zero (on the robot) via a socket connection to control the robot’s movements. Once the points are drawn, the user can decide to draw another picture for the robot to draw or quit the program. Each of these modules is described in detail below. </p>

              </div>
      </div>

    <hr id='drawings'>

      <div style="text-align:center;">
              <h2>Drawings</h2>
              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
      </div>

    <hr id='testing'>

      <div style="text-align:center;">
              <h2>Testing</h2>
              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
      </div>

    <hr id='result'>

      <div style="text-align:center;">
              <h2>Result</h2>
              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
      </div>

    <hr>
    <hr id='future'>

      <div style="text-align:center;">
              <h2>Future</h2>
              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
      </div>

    <hr>
    <div class="row" style="text-align:center;">
          <h2>Work Distribution</h2>
          <div style="text-align:center;">
              <img class="img-rounded" src="pics/group.jpg" alt="Generic placeholder image" style="width:80%;">
              <h4>Project group picture</h4>
          </div>
          <div class="col-md-6" style="font-size:16px">
              <img class="img-rounded" src="pics/a.png" alt="Generic placeholder image" width="240" height="240">
              <h3>Rick</h3>
              <p class="lead">netid@cornell.edu</p>
              <p>Designed the overall software architecture (Just being himself).
          </div>
          <div class="col-md-6" style="font-size:16px">
              <img class="img-rounded" src="pics/b.png" alt="Generic placeholder image" width="240" height="240">
              <h3>Morty</h3>
              <p class="lead">netid@cornell.edu</p>
              <p>Tested the overall system.
          </div>
      </div>

    <hr>
      <div style="font-size:18px">
          <h2>Parts List</h2>
          <ul>
              <li>Raspberry Pi $35.00</li>
              <li>Raspberry Pi Camera V2 $25.00</li>
              <a href="https://www.adafruit.com/product/1463"><li>NeoPixel Ring - $9.95</li></a>
              <li>LEDs, Resistors and Wires - Provided in lab</li>
          </ul>
          <h3>Total: $69.95</h3>
      </div>
      <hr>
      <div style="font-size:18px">
          <h2>References</h2>
          <a href="https://picamera.readthedocs.io/">PiCamera Document</a><br>
          <a href="http://www.micropik.com/PDF/SG90Servo.pdf">Tower Pro Servo Datasheet</a><br>
          <a href="http://getbootstrap.com/">Bootstrap</a><br>
          <a href="http://abyz.co.uk/rpi/pigpio/">Pigpio Library</a><br>
          <a href="https://sourceforge.net/p/raspberry-gpio-python/wiki/Home/">R-Pi GPIO Document</a><br>

      </div>

    <hr>

      <div class="row">
              <h2>Code Appendix</h2>
              <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #888888">#Hello ui.py</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">sys</span><span style="color: #333333">,</span> <span style="color: #0e84b5; font-weight: bold">time</span><span style="color: #333333">,</span> <span style="color: #0e84b5; font-weight: bold">pygame</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">math</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">os</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">RPi.GPIO</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">GPIO</span>
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">controller</span> <span style="color: #008800; font-weight: bold">import</span> <span style="color: #333333">*</span>

os<span style="color: #333333">.</span>putenv(<span style="background-color: #fff0f0">&#39;SDL_VIDEODRIVER&#39;</span>, <span style="background-color: #fff0f0">&#39;fbcon&#39;</span>) <span style="color: #888888"># Display on piTFT</span>
os<span style="color: #333333">.</span>putenv(<span style="background-color: #fff0f0">&#39;SDL_FBDEV&#39;</span>, <span style="background-color: #fff0f0">&#39;/dev/fb1&#39;</span>)
os<span style="color: #333333">.</span>putenv(<span style="background-color: #fff0f0">&#39;SDL_MOUSEDRV&#39;</span>, <span style="background-color: #fff0f0">&#39;TSLIB&#39;</span>)    <span style="color: #888888"># Track mouse clicks</span>
os<span style="color: #333333">.</span>putenv(<span style="background-color: #fff0f0">&#39;SDL_MOUSEDEV&#39;</span>, <span style="background-color: #fff0f0">&#39;/dev/input/touchscreen&#39;</span>)

<span style="color: #888888"># timer</span>
start_time <span style="color: #333333">=</span> time<span style="color: #333333">.</span>time()

<span style="color: #888888"># Initialize GPIO pins</span>
GPIO<span style="color: #333333">.</span>setmode(GPIO<span style="color: #333333">.</span>BCM)
GPIO<span style="color: #333333">.</span>setup(<span style="color: #0000DD; font-weight: bold">17</span>, GPIO<span style="color: #333333">.</span>IN, pull_up_down<span style="color: #333333">=</span>GPIO<span style="color: #333333">.</span>PUD_UP)
GPIO<span style="color: #333333">.</span>setup(<span style="color: #0000DD; font-weight: bold">22</span>, GPIO<span style="color: #333333">.</span>IN, pull_up_down<span style="color: #333333">=</span>GPIO<span style="color: #333333">.</span>PUD_UP)
GPIO<span style="color: #333333">.</span>setup(<span style="color: #0000DD; font-weight: bold">23</span>, GPIO<span style="color: #333333">.</span>IN, pull_up_down<span style="color: #333333">=</span>GPIO<span style="color: #333333">.</span>PUD_UP)
GPIO<span style="color: #333333">.</span>setup(<span style="color: #0000DD; font-weight: bold">27</span>, GPIO<span style="color: #333333">.</span>IN, pull_up_down<span style="color: #333333">=</span>GPIO<span style="color: #333333">.</span>PUD_UP)

pygame<span style="color: #333333">.</span>init()
pygame<span style="color: #333333">.</span>mouse<span style="color: #333333">.</span>set_visible(<span style="color: #007020">True</span>)

size <span style="color: #333333">=</span> width, height <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">320</span>, <span style="color: #0000DD; font-weight: bold">240</span>
black <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">0</span>
white <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">255</span>, <span style="color: #0000DD; font-weight: bold">255</span>, <span style="color: #0000DD; font-weight: bold">255</span>

screen <span style="color: #333333">=</span> pygame<span style="color: #333333">.</span>display<span style="color: #333333">.</span>set_mode(size)
my_font <span style="color: #333333">=</span> pygame<span style="color: #333333">.</span>font<span style="color: #333333">.</span>Font(<span style="color: #007020">None</span>, <span style="color: #0000DD; font-weight: bold">25</span>)

distance <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">62</span>

sqr_surface <span style="color: #333333">=</span> my_font<span style="color: #333333">.</span>render(<span style="background-color: #fff0f0">&quot;Clear&quot;</span>, <span style="color: #007020">True</span>, black)
sqr_pos <span style="color: #333333">=</span> sqr_x, left_y <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">290</span>, <span style="color: #0000DD; font-weight: bold">40</span>
sqr_rect <span style="color: #333333">=</span> sqr_surface<span style="color: #333333">.</span>get_rect(center<span style="color: #333333">=</span>sqr_pos)

sq_surface <span style="color: #333333">=</span> my_font<span style="color: #333333">.</span>render(<span style="background-color: #fff0f0">&quot;Quit&quot;</span>, <span style="color: #007020">True</span>, black)
sq_rect <span style="color: #333333">=</span> sq_surface<span style="color: #333333">.</span>get_rect(center<span style="color: #333333">=</span>sqr_pos)

done_surface <span style="color: #333333">=</span> my_font<span style="color: #333333">.</span>render(<span style="background-color: #fff0f0">&quot;Done&quot;</span>, <span style="color: #007020">True</span>, black)
done_pos <span style="color: #333333">=</span> done_x, done_y <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">290</span>, <span style="color: #0000DD; font-weight: bold">40</span> <span style="color: #333333">+</span> distance
done_rect <span style="color: #333333">=</span> done_surface<span style="color: #333333">.</span>get_rect(center<span style="color: #333333">=</span>done_pos)

undo_surface <span style="color: #333333">=</span> my_font<span style="color: #333333">.</span>render(<span style="background-color: #fff0f0">&quot;Undo&quot;</span>, <span style="color: #007020">True</span>, black)
undo_pos <span style="color: #333333">=</span> undo_x, undo_y <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">290</span>, <span style="color: #0000DD; font-weight: bold">40</span> <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">2</span><span style="color: #333333">*</span>distance
undo_rect <span style="color: #333333">=</span> undo_surface<span style="color: #333333">.</span>get_rect(center<span style="color: #333333">=</span>undo_pos)

redo_surface <span style="color: #333333">=</span> my_font<span style="color: #333333">.</span>render(<span style="background-color: #fff0f0">&quot;Redo&quot;</span>, <span style="color: #007020">True</span>, black)
redo_pos <span style="color: #333333">=</span> redo_x, redo_y <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">290</span>, <span style="color: #0000DD; font-weight: bold">40</span> <span style="color: #333333">+</span> <span style="color: #0000DD; font-weight: bold">3</span><span style="color: #333333">*</span>distance
redo_rect <span style="color: #333333">=</span> redo_surface<span style="color: #333333">.</span>get_rect(center<span style="color: #333333">=</span>redo_pos)

show_buttons <span style="color: #333333">=</span> <span style="color: #007020">True</span>
points <span style="color: #333333">=</span> []
pointsredo <span style="color: #333333">=</span> []
start <span style="color: #333333">=</span> time<span style="color: #333333">.</span>time()
c <span style="color: #333333">=</span> Controller()
timer <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>
<span style="color: #008800; font-weight: bold">while</span> <span style="color: #007020">True</span>:
	<span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> GPIO<span style="color: #333333">.</span>input(<span style="color: #0000DD; font-weight: bold">17</span>):
                <span style="color: #008800; font-weight: bold">if</span> points <span style="color: #333333">==</span> []:
                    <span style="color: #008800; font-weight: bold">break</span>
		points <span style="color: #333333">=</span> []
		pointsredo <span style="color: #333333">=</span> []
		time<span style="color: #333333">.</span>sleep(<span style="color: #6600EE; font-weight: bold">0.2</span>)
	<span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> GPIO<span style="color: #333333">.</span>input(<span style="color: #0000DD; font-weight: bold">22</span>):
		c<span style="color: #333333">.</span>drawPoints(points[::<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>])
	<span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> GPIO<span style="color: #333333">.</span>input(<span style="color: #0000DD; font-weight: bold">23</span>):
		<span style="color: #008800; font-weight: bold">if</span> points <span style="color: #333333">!=</span> []:
			pointsredo <span style="color: #333333">=</span> [points[<span style="color: #0000DD; font-weight: bold">0</span>]] <span style="color: #333333">+</span> pointsredo
			<span style="color: #008800; font-weight: bold">del</span> points[<span style="color: #0000DD; font-weight: bold">0</span>]
		time<span style="color: #333333">.</span>sleep(<span style="color: #6600EE; font-weight: bold">0.2</span>)
	<span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> GPIO<span style="color: #333333">.</span>input(<span style="color: #0000DD; font-weight: bold">27</span>):
		<span style="color: #008800; font-weight: bold">if</span> pointsredo <span style="color: #333333">!=</span> []:
			points <span style="color: #333333">=</span> [pointsredo[<span style="color: #0000DD; font-weight: bold">0</span>]] <span style="color: #333333">+</span> points
			<span style="color: #008800; font-weight: bold">del</span> pointsredo[<span style="color: #0000DD; font-weight: bold">0</span>]
		time<span style="color: #333333">.</span>sleep(<span style="color: #6600EE; font-weight: bold">0.2</span>)
	<span style="color: #008800; font-weight: bold">for</span> event <span style="color: #000000; font-weight: bold">in</span> pygame<span style="color: #333333">.</span>event<span style="color: #333333">.</span>get():
		<span style="color: #008800; font-weight: bold">if</span> event<span style="color: #333333">.</span>type <span style="color: #333333">==</span> pygame<span style="color: #333333">.</span>QUIT:
			sys<span style="color: #333333">.</span>exit()
		<span style="color: #008800; font-weight: bold">if</span> event<span style="color: #333333">.</span>type <span style="color: #333333">==</span> pygame<span style="color: #333333">.</span>MOUSEBUTTONUP:
			show_buttons <span style="color: #333333">=</span> <span style="color: #007020">False</span>
			timer <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">100</span>
			x, y <span style="color: #333333">=</span> pygame<span style="color: #333333">.</span>mouse<span style="color: #333333">.</span>get_pos()
			dist <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">20</span>
			<span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> points:
				xi, yi <span style="color: #333333">=</span> i
				<span style="color: #008800; font-weight: bold">if</span> ((xi <span style="color: #333333">-</span> x)<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span> <span style="color: #333333">+</span> (yi <span style="color: #333333">-</span> y)<span style="color: #333333">**</span><span style="color: #0000DD; font-weight: bold">2</span>)<span style="color: #333333">**.</span><span style="color: #0000DD; font-weight: bold">5</span> <span style="color: #333333">&lt;</span> dist:
					x, y <span style="color: #333333">=</span> xi, yi
					<span style="color: #008800; font-weight: bold">break</span>
			points <span style="color: #333333">=</span> [(x, y)] <span style="color: #333333">+</span> points
			pointsredo <span style="color: #333333">=</span> []
			<span style="color: #008800; font-weight: bold">print</span> x, y

	<span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> show_buttons:
		<span style="color: #008800; font-weight: bold">if</span> timer <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>:
			show_buttons <span style="color: #333333">=</span> <span style="color: #007020">True</span>
		timer <span style="color: #333333">-=</span> <span style="color: #0000DD; font-weight: bold">1</span>

	screen<span style="color: #333333">.</span>fill(white)
	<span style="color: #008800; font-weight: bold">for</span> i <span style="color: #000000; font-weight: bold">in</span> points:
		pygame<span style="color: #333333">.</span>draw<span style="color: #333333">.</span>circle(screen, black, i, <span style="color: #0000DD; font-weight: bold">2</span>)
	<span style="color: #008800; font-weight: bold">if</span> <span style="color: #007020">len</span>(points) <span style="color: #333333">&gt;</span> <span style="color: #0000DD; font-weight: bold">1</span>:
		pygame<span style="color: #333333">.</span>draw<span style="color: #333333">.</span>lines(screen, black, <span style="color: #007020">False</span>, points, <span style="color: #0000DD; font-weight: bold">2</span>)

	<span style="color: #008800; font-weight: bold">if</span> show_buttons:
                <span style="color: #008800; font-weight: bold">if</span> points <span style="color: #333333">==</span> []:
                        screen<span style="color: #333333">.</span>blit(sq_surface, sq_rect)
                <span style="color: #008800; font-weight: bold">else</span>:
		        screen<span style="color: #333333">.</span>blit(sqr_surface, sqr_rect)
		screen<span style="color: #333333">.</span>blit(done_surface, done_rect)
		screen<span style="color: #333333">.</span>blit(undo_surface, undo_rect)
		screen<span style="color: #333333">.</span>blit(redo_surface, redo_rect)
	pygame<span style="color: #333333">.</span>display<span style="color: #333333">.</span>flip()

	time<span style="color: #333333">.</span>sleep(<span style="color: #6600EE; font-weight: bold">0.01</span>)

GPIO<span style="color: #333333">.</span>cleanup()
sys<span style="color: #333333">.</span>exit()
</pre></td></tr></table></div>

      </div>





    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script> -->
  </body>
</html>
